<section class="auth">
  <img class="photo" alt="" src="assets/images/logo.png">
  @if (successText) {
    <p class="text-center">{{ successText }}</p>
    <p class="text-left mt-2">Email: {{ testEmail }}</p>
    <p class="text-left">Password: {{ testPassword }}</p>
    <button class="w-80 mx-auto mt-2" mat-raised-button color="accent" (click)="dialogRef.close()">Okay</button>
  } @else {
    <h1 class="text-center">
      @if (data.process === 'signIn') {
        Sign In
      } @else {
        Sign Up
      }
    </h1>
    <hr class="w-80 mx-auto my-2">
    @if (form) {
      <form class="auth-form" [formGroup]="form">
        <mat-form-field>
          <mat-label>Username</mat-label>
          <input matInput type="text" required formControlName="username">
          @if (!isUsernameAvailable) {
            <mat-error>Username is not available!</mat-error>
          }
        </mat-form-field>
        @if (data.process === 'signUp') {
          <mat-form-field>
            <mat-label>First Name</mat-label>
            <input matInput type="text" required formControlName="firstName">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Last Name</mat-label>
            <input matInput type="text" required formControlName="lastName">
          </mat-form-field>

          <mat-form-field>
            <mat-label>Email</mat-label>
            <input matInput type="email" required formControlName="email">
          </mat-form-field>
        }
        <mat-form-field>
          <mat-label>Password</mat-label>
          <input matInput type="password" required formControlName="password">
        </mat-form-field>
        @if (data.process === 'signUp') {
          <mat-form-field>
            <mat-label>Confirm Password</mat-label>
            <input matInput type="password" required formControlName="confirmPassword">
          </mat-form-field>
        }
      </form>
      <button class="w-90 mx-auto" mat-raised-button color="accent" (click)="authAction()">
        @if (data.process === 'signUp') {
          Sign Up
        } @else {
          Sign In
        }
      </button>
      <button class="w-60 mx-auto mt-2" mat-stroked-button color="accent" (click)="cancelAuthAction()">Cancel</button>
      @if (data.process === 'signIn') {
        <button class="invisible-button mx-auto" (click)="switchProcessType('signUp')">Sign Up</button>
      } @else {
        <button class="invisible-button mx-auto" (click)="switchProcessType('signIn')">Sign In</button>
      }
    }
  }
</section>
